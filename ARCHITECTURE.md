# Hower English Taro 架构指南

## 项目概述

Hower English Taro 是一款基于 Taro 和 React 框架开发的微信小程序，旨在帮助用户高效记忆英语单词。该应用基于艾宾浩斯遗忘曲线原理设计学习方法，提供词汇学习、练习和进度追踪功能，让用户能够系统化地掌握英语词汇。

## 架构分析

### 整体架构

项目采用基于 Taro 的前端架构，具有以下特点：

1. **多端统一开发**：基于 Taro 框架实现，可同时适配微信小程序、H5 等多个平台
2. **组件化设计**：采用 React 组件化思想，将 UI 拆分为可复用的组件
3. **TypeScript 支持**：全面使用 TypeScript 进行开发，提高代码可维护性和类型安全
4. **本地数据存储**：利用小程序存储 API 实现数据持久化，无需后端服务器

### 目录结构

```
/Users/wxkj/code/hower-english-taro/
├── config/                 # Taro 配置文件
├── src/
│   ├── assets/             # 静态资源（图标、图片）
│   │   └── icons/          # UI 图标
│   ├── components/         # 可复用组件
│   │   └── BarChart/       # 数据可视化组件
│   ├── pages/              # 应用页面
│   │   ├── index/          # 首页（词汇学习）
│   │   ├── analysis/       # 数据分析页面
│   │   └── profile/        # 用户个人页面
│   ├── styles/             # 全局样式
│   ├── app.ts              # 应用主入口
│   └── app.config.ts       # 应用配置
├── types/                  # TypeScript 类型定义
└── package.json            # 项目依赖
```

### 核心模块

1. **首页模块**：
   - 提供单词学习主界面
   - 实现单词本、单元选择功能
   - 提供学习模式和听写模式
   - 支持单词类型筛选（动词、名词、形容词等）

2. **分析模块**：
   - 提供数据可视化功能
   - 实现学习进度追踪
   - 显示单词掌握统计数据
   - 支持按时间、教材筛选

3. **用户模块**：
   - 提供用户信息展示
   - 实现学习统计摘要
   - 提供缓存管理功能

4. **组件模块**：
   - BarChart：柱状图可视化组件
   - 其他可复用 UI 组件

## 需求功能

### 已实现功能

1. **词汇学习系统**：
   - 按书本、单元、类型分类单词
   - 可配置学习会话（新词、错误词、复习词）
   - 视觉化学习卡片
   - 计时听写模式测试

2. **间隔重复机制**：
   - 实现艾宾浩斯遗忘曲线原理
   - 优先展示错误率高的单词
   - 追踪练习频率和错误率
   - 根据错误历史和时间间隔安排复习

3. **进度追踪与分析**：
   - 掌握级别分类（不熟悉、濒危、一般、掌握、精通）
   - 每日学习活动追踪与可视化
   - 按目标筛选分析数据
   - 进度监控可视化图表

4. **用户配置与设置**：
   - 用户统计展示
   - 应用设置与偏好
   - 数据管理选项

### 计划功能

1. **微信登录与同步**：
   - 用户数据云端同步
   - 跨设备学习进度保持

2. **社交分享功能**：
   - 分享学习进度与成就
   - 好友排行榜

3. **学习提醒**：
   - 订阅通知提醒学习
   - 个性化学习计划

4. **高级学习算法**：
   - 优化间隔重复算法
   - 个性化学习路径推荐

## 技术栈

### 前端技术

1. **核心框架**：
   - Taro 4.1.4：跨平台小程序开发框架
   - React 18.0.0：用户界面构建
   - TypeScript：类型安全的 JavaScript 超集

2. **样式与 UI**：
   - Sass：CSS 预处理器
   - 自定义组件：数据可视化等

3. **状态管理**：
   - React Hooks：组件级状态管理
   - useRef：异步操作中访问最新状态

### 开发环境

1. **构建工具**：
   - Vite：现代前端构建工具
   - ESLint 和 Stylelint：代码质量检查
   - Husky：Git hooks 工具
   - CommitLint：提交信息规范

2. **平台目标**：
   - 主要平台：微信小程序 (weapp)
   - 其他支持：H5、支付宝小程序等

3. **数据存储**：
   - 本地存储：使用 Taro 存储 API
   - 暂无后端集成（使用本地 JSON 数据）

## 数据模型

### 单词模型

```typescript
interface Word {
  id: number;        // 单词ID
  book: string;      // 书本标识（7A, 7B等）
  unit: number | string; // 单元编号
  type: string;      // 单词类型（v=动词, n=名词, a=形容词, d=短语, o=其他）
  en: string;        // 英文单词/短语
  cn: string;        // 中文翻译
  cnt: number;       // 练习次数
  error: number;     // 错误次数
  time: number;      // 上次练习时间戳
  input?: string;    // 用户练习输入
  score?: number;    // 计算得分（用于排序）
  res?: boolean;     // 上次练习结果（正确/错误）
}
```

### 数据存储

- 词汇数据存储在 `word.ts` 并持久化到本地存储
- 用户进度和统计数据基于单词数据计算

## 技术实现细节

### 学习算法

应用实现了基于以下因素的自定义排序逻辑：
- 错误率（错误次数/练习次数比率）
- 自上次练习以来的时间
- 练习频率
- 针对错误单词和复习单词的不同算法

### 数据可视化

- 使用自定义 BarChart 组件进行数据可视化
- 支持多种图表展示学习进度和统计数据

### 持久化存储

- 使用 Taro 的存储 API 实现本地数据持久化
- 加载和保存包含进度跟踪的词汇数据

## 未来发展方向

1. **云端同步**：
   - 实现云端数据存储和同步
   - 多设备数据一致性保障

2. **智能学习路径**：
   - 基于用户学习习惯的个性化推荐
   - 自适应难度调整

3. **社交功能拓展**：
   - 好友互动与挑战
   - 成就系统与激励机制

4. **多媒体学习资源**：
   - 单词发音与例句音频
   - 情境记忆辅助图片